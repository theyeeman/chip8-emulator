from screen import chip8_Screen
from chip8 import *
#from functions import *
import pygame
import sys

from pygame.locals import (
    K_1,
    K_2,
    K_3,
    K_4,
    K_q,
    K_w,
    K_e,
    K_r,
    K_a,
    K_s,
    K_d,
    K_f,
    K_z,
    K_x,
    K_c,
    K_v
)

fontSet = {
    0 :[0xF0, 0x90, 0x90, 0x90, 0xF0],
    1 : [0x20, 0x60, 0x20, 0x20, 0x70],
    2 : [0xF0, 0x10, 0xF0, 0x80, 0xF0],
    3 : [0xF0, 0x10, 0xF0, 0x10, 0xF0],
    4 : [0x90, 0x90, 0xF0, 0x10, 0x10],
    5 : [0xF0, 0x80, 0xF0, 0x10, 0xF0],
    6 : [0xF0, 0x80, 0xF0, 0x90, 0xF0],
    7 : [0xF0, 0x10, 0x20, 0x40, 0x40],
    8 : [0xF0, 0x90, 0xF0, 0x90, 0xF0],
    9 : [0xF0, 0x90, 0xF0, 0x10, 0xF0],
    10 : [0xF0, 0x90, 0xF0, 0x90, 0x90],
    11 : [0xE0, 0x90, 0xE0, 0x90, 0xE0],
    12 : [0xF0, 0x80, 0x80, 0x80, 0xF0],
    13 : [0xE0, 0x90, 0x90, 0x90, 0xE0],
    14 : [0xF0, 0x80, 0xF0, 0x80, 0xF0],
    15 : [0xF0, 0x80, 0xF0, 0x80, 0x80]
    }

if (__name__ == "__main__"):
    # Initalize all required variables
    myScreen = chip8_Screen(10)
    myScreen.initDisplay()
    cpu = chip8_CPU(myScreen)

    cpu.loadROM("airplane.ch8", 0x200)

    while (cpu.running):

        clock = pygame.time.Clock()

        cpu.runOneCycle()
        cpu.screen.update()
        #print("op: ", hex(cpu.op), "pc: ", hex(cpu.pc))

        clock.tick(60)
    
    pygame.quit()